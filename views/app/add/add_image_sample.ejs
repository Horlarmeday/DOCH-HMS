<% include ../../partials/header %>
<% include ../../partials/sidebar %>

<div class="page-wrapper">
    <div class="content">
         <!-- Flash message -->
         <% if(error && error.length > 0){ %>
            <div class="alert alert-danger alert-dismissible">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <%= error %>
            </div>
    <% } %>
    <% if(success && success.length > 0){ %>
            <div class="alert alert-success alert-dismissible">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <%= success %>
            </div>
    <% } %>
    <!-- CSS -->
    <style>
    #my_camera{
     width: 320px;
     height: 240px;
     border: 1px solid black;
    }
    </style>
    <div class="row">
            <div class="col-lg-8 offset-lg-2">
                <h4 class="page-title">Add Patient</h4>
            </div>
            <div class="col-sm-8 col-9 text-right m-b-20">
                <a href="/patients" class="btn btn-primary float-right btn-rounded"><i class="fa fa-wheelchair"></i> Patients</a>
            </div>
        </div>
    
    <div id="my_camera"></div>
    <input type=button value="Configure" onClick="configure()">
    <input type=button value="Take Snapshot" onClick="take_snapshot()">
    <input id="save" type=button value="Save Snapshot" onClick="saveSnap()"><hr>
     
    <div id="results" ></div>
     
    <!-- Webcam.min.js -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webcamjs/1.0.25/webcam.min.js"></script>

    <div class="row">
            <div class="col-lg-8 offset-lg-2">
                <form action="take-picture" method="POST" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>First Name <span class="text-danger">*</span></label>
                                <input name="fname" class="form-control" type="text">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Last Name</label>
                                <input name="lname" class="form-control" type="text">
                            </div>
                        </div>
                        <!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label>Username <span class="text-danger">*</span></label>
                                <input class="form-control" type="text">
                            </div>
                        </div> -->
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Email <span class="text-danger">*</span></label>
                                <input name="email" class="form-control" type="email">
                            </div>
                        </div>
                        <!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label>Password</label>
                                <input class="form-control" type="password">
                            </div>
                        </div> -->
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Religion</label>
                                <select name="religion" class="form-control select">
                                    <option selected disabled>Select</option>
                                    <option>Christianity</option>
                                    <option>Islam</option>
                                    <option>Traditional</option>
                                    <option>Other</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Date of Birth</label>
                                <div class="cal-icon">
                                    <input name="birthday" type="date" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group gender-select">
                                <label class="gen-label">Gender:</label>
                                <div class="form-check-inline">
                                    <label class="form-check-label">
                                        <input type="radio" name="gender" class="form-check-input" value="Male">Male
                                    </label>
                                </div>
                                <div class="form-check-inline">
                                    <label class="form-check-label">
                                        <input type="radio" name="gender" class="form-check-input" value="Female">Female
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Address</label>
                                        <input name="address" type="text" class="form-control ">
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6 col-lg-4">
                                    <div class="form-group">
                                        <label>Country</label>
                                        <select name="country" class="form-control select">
                                            <option selected disabled>Select</option>
                                            <option>Nigeria</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6 col-lg-4">
                                    <div class="form-group">
                                        <label>State</label>
                                        <select name="state" class="form-control select">
                                            <option selected="selected" disabled>Select State</option>
                                            <option value="Abia">Abia</option>
                                            <option value="Adamawa">Adamawa</option>
                                            <option value="Akwa-Ibom">Akwa-Ibom</option>
                                            <option value="Anambra">Anambra</option>
                                            <option value="Bauchi">Bauchi</option>
                                            <option value="Bayelsa">Bayelsa</option>
                                            <option value="Benue">Benue</option>
                                            <option value="Borno">Borno</option>
                                            <option value="Cross-river">Cross-River</option>
                                            <option value="Delta">Delta</option>
                                            <option value="Ebonyi">Ebonyi</option>
                                            <option value="Edo">Edo</option>
                                            <option value="Ekiti">Ekiti</option>
                                            <option value="Enugu">Enugu</option>
                                            <option value="FCT">FCT</option>
                                            <option value="Gombe">Gombe</option>
                                            <option value="Imo" >Imo</option>
                                            <option value="Jigawa">Jigawa</option>
                                            <option value="Kaduna">Kaduna</option>
                                            <option value="Kano">Kano</option>
                                            <option value="Katsina">Katsina</option>
                                            <option value="Kebbi">Kebbi</option>
                                            <option value="Kogi">Kogi</option>
                                            <option value="Kwara">Kwara</option>
                                            <option value="Lagos">Lagos</option>
                                            <option value="Nassrawa">Nassarawa</option>
                                            <option value="Niger">Niger</option>
                                            <option value="Ogun">Ogun</option>
                                            <option value="Ondo">Ondo</option>
                                            <option value="Osun">Osun</option>
                                            <option value="Oyo" >Oyo</option>
                                            <option value="Plateau">Plateau</option>
                                            <option value="Rivers">Rivers</option>
                                            <option value="Sokoto">Sokoto</option>
                                            <option value="Taraba">Taraba</option>
                                            <option value="Yobe">Yobe</option>
                                            <option value="Zamfara">Zamfara</option>	
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6 col-lg-4">
                                    <div class="form-group">
                                        <label>City</label>
                                        <input name="city" type="text" class="form-control">
                                    </div>
                                </div>
                                
                                <!-- <div class="col-sm-6 col-md-6 col-lg-3">
                                    <div class="form-group">
                                        <label>Postal Code</label>
                                        <input type="text" class="form-control">
                                    </div>
                                </div> -->
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Phone </label>
                                <input name="phone" class="form-control" type="text">
                            </div>
                        </div>
                        <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Username </label>
                                    <input name="username" class="form-control" type="text">
                                </div>
                        </div>
                        <input id="mydata" type="hidden" name="myData" value="mydata"/>
                        <!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label>Avatar</label>
                                <div class="profile-upload">
                                    <div class="upload-img">
                                        <img alt="" src="assets/img/user.jpg">
                                    </div>
                                    <div class="upload-input">
                                        <input type="file" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div> -->
                    </div>
                    <div class="form-group">
                        <label class="display-block">Status</label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="status" id="patient_active" value="option1" checked>
                            <label class="form-check-label" for="patient_active">
                            Active
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="status" id="patient_inactive" value="option2">
                            <label class="form-check-label" for="patient_inactive">
                            Inactive
                            </label>
                        </div>
                    </div>
                    <div class="m-t-20 text-center">
                        <button type="submit" class="btn btn-primary submit-btn">Create Patient</button>
                    </div>
                </form>
            </div>
        </div>


    
    <!-- Configure a few settings and attach camera -->
    <script language="JavaScript">
    function configure() {
        Webcam.set({
         width: 320,
         height: 240,
         image_format: 'jpeg',
         jpeg_quality: 90
        });
    }

     Webcam.attach( '#my_camera' );

     // preload shutter audio clip
    var shutter = new Audio('shutter.wav');
    shutter.autoplay = false;
    //shutter.src = navigator.userAgent.match(/Firefox/) ? 'shutter.wav' : 'shutter.wav';
    
    //Code to handle taking the snapshot and displaying it locally
    function take_snapshot() {
    // play sound effect
    shutter.play();
     
     // take snapshot and get image data
     Webcam.snap( function(data_uri) {
      //Stuff the image to the hidden input
      var raw_image_data = data_uri.replace(/^data\:image\/\w+\;base64\,/, '');
      document.getElementById('mydata').value = raw_image_data;
      console.log(mydata)

      // display results in page
      document.getElementById('results').innerHTML = 
      '<img id="imageprev" src="'+data_uri+'"/>';
      } );

      Webcam.reset();
    }

    function saveSnap(){
    // Get base64 value from <img id='imageprev'> source
    var base64image = document.getElementById("imageprev").src;

    // Webcam.upload( base64image, '/take-picture', function(code, text) {
    //     console.log('Save successfully');
    // });

    }
    </script>
    </div>
</div>


<% include ../../partials/footer %>